<%- include ('../../Partials/headerStyle.ejs'); %>

<body
    class="vertical-layout vertical-menu-modern dark-layout 1-column bg-full-screen-image navbar-floating footer-static bg-register-full-screen-image  blank-page blank-page"
    data-open="click" data-menu="vertical-menu-modern" data-col="1-column" data-layout="dark-layout-register">
    <!-- BEGIN: Content-->
    <div class="app-content content">
        <div class="content-overlay"></div>
        <div class="header-navbar-shadow"></div>
        <div class="content-wrapper">
            <div class="content-header row">
            </div>
            <div class="content-body">
                <section class="row flexbox-container">
                    <div class="col-xl-8 col-10 d-flex justify-content-center">
                        <div class="card rounded-0 mb-0" style="filter: drop-shadow(2px 4px 6px black);">
                            <div class="row m-0">
                                <div class="col-lg-12 col-12 p-0">
                                    <div class="card rounded-0 mb-0 p-2">
                                        <div class="card-header pt-50 pb-1">
                                            <div class="card-title">
                                                <h4 class="mb-0">Criar Conta</h4>
                                            </div>
                                        </div>
                                        <p class="px-2">Preencha o formulário para criar uma conta</p>
                                        <div class="card-content">
                                            <div class="card-body">
                                                <form id="sign_up_form" class="form" action="/auth-register"
                                                    method="post">
                                                    <div class="form-body">
                                                        <div class="row">
                                                            <div class="col-md-6 col-12">
                                                                <div class="form-label-group">
                                                                    <input type="text" id="name" name="name"
                                                                        class="form-control" placeholder="Nome Completo">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6 col-12">
                                                                <div class="form-label-group">
                                                                    <input type="text" id="cpf"
                                                                        class="form-control" name="cpf"
                                                                        placeholder="CPF">
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6 col-12">
                                                                <fieldset class="form-group">
                                                                    <select class="form-control" id="gender"
                                                                        name="gender" placeholder="Gênero">
                                                                        <option disabled selected>Gênero</option>
                                                                        <option value="F">Feminino</option>
                                                                        <option value="M">Masculino</option>
                                                                        <option value="O">Outros</option>
                                                                    </select>
                                                                </fieldset>
                                                            </div>
                                                            
                                                            <div class="col-md-6 col-12">
                                                                <div class="form-label-group">
                                                                    <input type="email" id="email"
                                                                        name="email" class="form-control"
                                                                        placeholder="E-mail">
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6 col-12">
                                                                <div class="form-label-group">
                                                                    <input type="password" id="password"
                                                                        class="form-control" name="password"
                                                                        placeholder="Senha">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6 col-12">
                                                                <div class="form-label-group">
                                                                    <input type="password" name="confPassword"
                                                                        id="confPassword" class="form-control"
                                                                        placeholder="Confirmar Senha">
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6 col-12">
                                                                <div class="form-label-group">
                                                                    <textarea type="text" id="description"
                                                                        placeholder="Descrição"
                                                                        class="form-control"
                                                                        name="description"></textarea>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6 col-12">
                                                                <div class="form-label-group">
                                                                    <input type="text" id="cellPhone" name="cellPhone"
                                                                        class="form-control" placeholder="Celular">
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6 col-12">
                                                                <div class="form-label-group">
                                                                    <input type="text" id="question" name="question"
                                                                        class="form-control" placeholder="Pergunta para Recuperação de Senha">
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6 col-12">
                                                                <div class="form-label-group">
                                                                    <input type="text" id="answer" name="answer"
                                                                        class="form-control" placeholder="Resposta para Recuperação de Senha">
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6 col-12"></div>

                                                            <div class="col-md-6 col-12">
                                                                <div class="form-group row">
                                                                    <div class="col-12">
                                                                        <fieldset class="checkbox">
                                                                            <div
                                                                                class="vs-checkbox-con vs-checkbox-primary">
                                                                                <input type="checkbox"
                                                                                    id="terms_of_use"
                                                                                    name="terms_of_use">
                                                                                <span class="vs-checkbox">
                                                                                    <span class="vs-checkbox--check">
                                                                                        <i
                                                                                            class="vs-icon feather icon-check"></i>
                                                                                    </span>
                                                                                </span>
                                                                                <span class=""> Concordo em disponibilizar meus dados</span>
                                                                            </div>
                                                                        </fieldset>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6 col-12">
                                                                <a href="auth-login"
                                                                    class="btn btn-outline-primary float-left btn-inline">Login</a>
                                                            </div>

                                                            <div class="col-md-6 col-12">
                                                                <button type="button" id="btnSalvar"
                                                                    class="btn btn-primary float-right btn-inline">Cadastrar</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
            </section>

        </div>
    </div>
    </div>

    <script src="../../../app-assets/vendors/js/vendors.min.js"></script>
    <script src="../../../app-assets/js/core/app-menu.js"></script>
    <script src="../../../app-assets/js/core/app.js"></script>
    <script src="../../../app-assets/js/scripts/components.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.js"></script>
    <script src="../../../app-assets/js/scripts/jquery.mask.js"></script>
    <script type="text/javascript">
        jQuery.validator.addMethod("dateBR", function (value, element) {
            return this.optional(element) || /^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/.test(value);
        }, "*Data inválida");


        $(document).ready(function () {
            $('#dataNasc').mask('00/00/0000');
            $('#cellPhone').mask('(00) 00000-0000');
            $('#cpf').mask('000.000.000-00', { reverse: true });

        });

        $("#btnSalvar").click(function (e) {
            console.log('click')
            e.preventDefault();
            $('#sign_up_form').validate({
                rules: {
                    name: {
                        required: true,
                        minlength: 12
                    },
                    cpf: {
                        required: true,
                        minlength: 11,
                    },
                    descricao: {
                        required: true
                    },
                    email: {
                        required: true,
                        email: true
                    },
                    cellPhone: {
                        required: true,
                        minlength: 11
                    },
                    password: {
                        required: true,
                        minlength: 8
                    },
                    confPassword: {
                        required: true,
                        equalTo: "#password"
                    },
                    gender: "required",
                    terms_of_use: "required"
                },
                messages: {
                    name: {
                        required: "O campo nome é obrigatório.",
                        minlength: "O campo nome deve ter no minimo 12 caracteres"
                    },
                    cpf: {
                        required: "O campo CPF é obrigatório.",
                        minlength: "O campo CPF deve ter 11 caracteres",
                    },
                    descricao: {
                        required: "O campo descrição é obrigatório."
                    },
                    cellPhone: {
                        required: "O campo Celular é obrigatório.",
                        minlength: "O numero de celular deve ter pelo menos 11 digitos com DDD"
                    },
                    email: {
                        required: "O campo email é obrigatório.",
                        email: "O campo email deve conter um email válido."
                    },
                    password: {
                        required: "O campo senha é obrigatório.",
                        minlength: "A senha deve ter no mínimo 8 caracteres"
                    },
                    confPassword: {
                        required: "O campo confirmação de senha é obrigatório.",
                        equalTo: "O campo confirmação de senha deve ser identico ao campo senha."
                    },
                    gender: "Selecione seu Gênero.",
                    terms_of_use: "Para se cadastrar você deve aceitar os termos de uso."
                }
            });

            if (!$("#sign_up_form").valid()) {
                return;
            } else {
                console.log('else')
                createAccount();
            }
        })

        function createAccount() {
            console.log('chegou aqui >>>>> ', $('#sign_up_form').serialize())
            $.ajax({
                type: 'post',
                url: '/auth-register',
                data: $('#sign_up_form').serialize(),
                datatype: "application/json",
                success: function (retorno) {
                    console.log('success', retorno)
                },
                error: function(retorno) {
                    console.log('error', retorno)
                }
            })
        }


        function submitmanual() {
            $("#inputCpf").val($("#inputCpf").cleanVal());
            $("#inputCel").val($("#inputCel").cleanVal());
            $("#sign_up_form").submit();
        }

    </script>
    <!-- END: Page JS-->




</body>
<!-- END: Body-->

</html>